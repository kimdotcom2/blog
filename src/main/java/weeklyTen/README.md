# 위클리 페이퍼 10

## 애플리케이션의 각 계층에서 수행되는 입력값 검증의 범위와 책임을 어떻게 나눌 것인지에 대해 설명해주세요. 특히 중복 검증을 피하면서도 안정성을 확보하는 방안과, 이와 관련된 트레이드오프에 대해 설명해주세요.

애플리케이션의 각 계층에서 입력값 검증을 수행하는 것은 보안과 안정성을 확보하는 데 매우 중요하다. 각 계층에서의 검증 범위와 책임을 나누는 방법은 이러한 것들이 있다.

1. controller layer
- 역할: 사용자로부터 입력받은 데이터를 최초로 처리하는 계층으로, 기본적인 형식 검증과 필수 값 검증을 수행한다.
- 검증 범위: 데이터 타입 확인, 필수 필드 존재 여부, 간단한 포맷 검증(예: 이메일, 비밀번호)
- 책임: 잘못된 입력이 애플리케이션 내부로 들어오는 것을 방지하는 첫 번째 방어선 역할

2. service layer
- 역할: 비즈니스 로직을 처리하는 계층으로, 도메인 규칙에 따른 검증을 수행한다.
- 검증 범위: 비즈니스 규칙 검증(예: 중복된 사용자 이름 확인, 재고 수량 확인)
- 책임: 비즈니스 로직에 맞는 데이터인지 확인하고, 잘못된 데이터가 비즈니스 로직에 영향을 미치지 않도록 방지

3. repository layer
- 역할: 데이터베이스와 상호작용하는 계층으로, 데이터 무결성 검증을 수행한다.
- 검증 범위: 데이터베이스 제약 조건 검증(예: 외래 키 제약, 유니크 제약)
- 책임: 데이터베이스에 저장되는 데이터의 무결성을 보장

## 테스트에서 사용되는 Mockito의 Mock, Stub, Spy 개념을 각각 설명하고, 어떤 상황에서 어떤 방식을 선택해야 하는지 구체적인 예시와 함께 설명하세요.

Mockito는 자바에서 널리 사용되는 테스트 프레임워크로, Mock, Stub, Spy와 같은 개념을 통해 테스트 대상을 효과적으로 격리하고 제어할 수 있다.

1. Stub
- 개념: Stub 객체는 특정 메서드 호출에 대해 미리 정의된 값을 반환하는 객체로, 주로 테스트 대상이 의존하는 객체의 동작을 단순화하는 데 사용된다.
- 사용 상황: 테스트 대상이 의존하는 객체의 특정 메서드 호출에 대해 고정된 응답이 필요할 때 사용한다.
- 예시: 외부 API 호출을 Stub으로 만들어, API 호출 시 항상 동일한 응답을 반환하도록 설정하여 Service 레이어의 로직을 테스트할 수 있다.

2. Mock
- 개념: Mock 객체는 테스트 대상의 동작을 시뮬레이션하는 객체로, 메서드 호출에 대한 기대값을 설정하고, 호출 여부를 검증할 수 있다.
- 사용 상황: 외부 시스템과의 상호작용을 테스트할 때 사용한다.
- 예시: 데이터베이스에 접근하는 DAO 객체를 Mock으로 만들어, 데이터베이스에 실제로 접근하지 않고도 Service 레이어의 로직을 테스트할 수 있다.

3. Spy
- 개념: Spy 객체는 실제 객체의 동작을 그대로 유지하면서, 특정 메서드 호출을 감시하고, 필요에 따라 메서드의 동작을 변경할 수 있는 객체이다.
- 사용 상황: 실제 객체의 동작을 유지하면서, 특정 메서드 호출을 감시하거나 변경할 때 사용한다.
- 예시: 실제 Service 객체를 Spy로 만들어, 특정 메서드 호출 시 로그를 남기거나, 일부 메서드의 동작을 변경하여 테스트할 수 있다.
# 위클리 페이퍼 13

## 세션 기반 인증과 토큰 기반 인증의 차이점과 각각의 보안 고려사항에 대해 설명하세요.

세션 기반 인증과 토큰 기반 인증은 웹 애플리케이션에서 사용자를 인증하는 두 가지 주요 방법이다.

### 세션 기반 인증
세션 기반 인증은 사용자가 로그인할 때 서버가 세션을 생성하고, 이 세션 ID를 클라이언트(보통 쿠키에 저장)에 전달하는 방식이다

이후 클라이언트는 요청을 보낼 때마다 이 세션 ID를 함께 보내어 서버가 사용자를 식별할 수 있도록 한다.

장점

1. 서버에서 세션을 관리하므로 세션 만료 및 로그아웃 처리가 용이하다.
2. 서버 측에서 세션 데이터를 저장하므로 민감한 정보를 클라이언트에 저장하지 않아도 된다.

단점
1. 서버에 세션 정보를 저장해야 하므로 확장성이 떨어질 수 있다.
2. 많은 사용자 접속 시 서버 메모리/DB에 부담이 커집니다.
3. CSRF 공격에 취약할 수 있다.

보안 고려사항
1. 세션 ID는 예측 불가능하게 생성되어야 하며, HTTPS를 통해 전송되어야 한다.
2. 세션 타임아웃을 설정하여 일정 시간 후 세션이 만료되도록 해야 한다.
3. 세션 고정 공격(Session Fixation)을 방지하기 위해 로그인 시 새로운 세션 ID를 발급해야 한다.

### 토큰 기반 인증
토큰 기반 인증은 사용자가 로그인할 때 서버가 JWT(JSON Web Token)와 같은 토큰을 생성하여 클라이언트에 전달하는 방식이다.
클라이언트는 이 토큰을 로컬 스토리지나 세션 스토리지에 저장하고, 이후 요청 시마다 이 토큰을 헤더에 포함시켜 서버에 보낸다.

장점
1. 서버가 상태를 유지하지 않으므로 확장성이 뛰어나다.
2. 서버 저장소에 의존하지 않기 때문에 부담이 적다.
3. CORS 환경에서 더 유연하게 동작할 수 있다.

단점
1. 토큰이 탈취될 경우 재발급이 어려워 보안 위험이 크다.
2. 토큰 만료 및 갱신 관리가 필요하다.

보안 고려사항
1. 토큰은 HTTPS를 통해 전송되어야 하며, 민감한 정보를 포함하지 않아야 한다.
2. 토큰 만료 시간을 설정하고, 갱신 메커니즘을 구현해야 한다.
3. 토큰 탈취를 방지하기 위해 토큰을 안전하게 저장해야 한다(예: HttpOnly 쿠키 사용).
4. 토큰 블랙 리스트를 관리하여 탈취된 토큰을 무효화할 수 있어야 한다.

##  OAuth 2.0의 주요 컴포넌트와 Authorization Code Grant 흐름을 설명하세요.

OAuth 2.0은 리소스 소유자(Resource Owner), 클라이언트(Client), 권한 서버(Authorization Server), 자원 서버(Resource Server)라는 네 가지 주요 컴포넌트로 구성된다.

1. 리소스 소유자(Resource Owner): 보호된 자원에 대한 접근 권한을 가진 사용자이다.
2. 클라이언트(Client): 리소스 소유자를 대신하여 보호된 자원에 접근하려는 애플리케이션이다.
3. 권한 서버(Authorization Server): 클라이언트의 인증을 처리하고 액세스 토큰을 발급하는 서버이다.
4. 자원 서버(Resource Server): 보호된 자원을 호스팅하는 서버로, 액세스 토큰을 검증하여 요청을 처리한다.

### Authorization Code Grant 흐름
Authorization Code Grant는 OAuth 2.0에서 가장 일반적으로 사용되는 인증 흐름 중 하나이다. 이 흐름은 다음과 같은 단계로 이루어진다.

1. 사용자가 클라이언트 애플리케이션에 로그인하려고 하면, 클라이언트는 OAuth 서버로 리디렉션하여 사용자의 인증을 요청한다. 이때 클라이언트 ID, 리디렉션 URI, 응답 유형(authorization_code) 등이 포함된다.
2. 사용자는 OAuth 서버에서 로그인하고, 클라이언트가 요청한 권한을 승인한다.
3. 사용자가 승인을 완료하면, OAuth 서버는 리디렉션 URI로 authorization 코드를 포함하여 클라이언트를 리디렉션한다.
4. 클라이언트는 이 authorization 코드를 받아서, OAuth 서버에 액세스 토큰을 요청한다. 이때 클라이언트 ID, 클라이언트 시크릿, 리디렉션 URI, authorization 코드 등이 포함된다.
5. OAuth 서버는 클라이언트의 요청을 검증하고, 유효한 경우 액세스 토큰을 발급하여 클라이언트에 반환한다.
6. 클라이언트는 이 액세스 토큰을 사용하여 자원 서버에 보호된 자원에 대한 요청을 보낸다.
7. 자원 서버는 액세스 토큰을 검증하고, 유효한 경우 요청된 자원을 반환한다.
